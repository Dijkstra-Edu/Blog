---
import Breadcrumbs from '@/components/Breadcrumbs.astro';
import PageHead from '@/components/PageHead.astro';
import Layout from '@/layouts/Layout.astro';
import { getSortedTags } from '@/lib/data-utils';
import { Icon } from 'astro-icon/components';

const sortedTags = await getSortedTags();
---

<Layout class="max-w-5xl">
  <PageHead slot="head" title="Tags" />
  <Breadcrumbs items={[{ label: 'Tags', icon: 'lucide:tags' }]} />

  <section class="mt-8 mb-16">
    <h1 class="mb-4 text-4xl font-bold">Explore Tags</h1>
    <p class="text-muted-foreground mb-8 text-lg leading-relaxed">
      Browse content organized by topic—each tag opens its corresponding posts.
    </p>

    <div class="grid items-stretch gap-6 sm:grid-cols-2 lg:grid-cols-3">
      {sortedTags.map(({ tag, count }) => (
        <a
          href={`/tags/${tag}`}
          class="ease-in-out group bg-card flex h-full flex-col overflow-hidden rounded-lg border transition-all duration-300 hover:-translate-y-1 hover:shadow-lg"
        >
          <div class="flex flex-1 flex-col p-4">
            <div class="mb-4 flex min-h-[4.5rem] flex-col">
              <div class="text-muted-foreground mb-3 text-xs font-medium tracking-wide uppercase flex items-center gap-1">
                <Icon name="lucide:file-text" class="w-4 h-4" />
                Tag • {tag}
              </div>
              <h3 class="group-hover:text-primary line-clamp-2 text-lg leading-tight font-semibold transition-colors">
                {tag}
              </h3>
            </div>
          </div>
          <div class="bg-muted/30 border-t p-4">
            <div class="flex items-center justify-between">
              <span class="text-sm font-medium">{count} posts</span>
              <Icon
                name="lucide:arrow-right"
                class="size-4 text-muted-foreground transition-transform group-hover:translate-x-1"
              />
            </div>
          </div>
        </a>
      ))}
    </div>
  </section>
</Layout>
